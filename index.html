<script>
  const original = document.getElementById("originalText");
  const converted = document.getElementById("convertedText");

  let active = null;

  const enToZh = {
    A: "阿", B: "贝", C: "西", D: "迪", E: "伊", F: "艾弗",
    G: "吉", H: "艾尺", I: "艾", J: "杰", K: "凯", L: "艾勒",
    M: "艾姆", N: "艾恩", O: "哦", P: "屁", Q: "吉吾",
    R: "艾儿", S: "艾丝", T: "提", U: "伊吾", V: "维",
    W: "达布流", X: "艾克斯", Y: "吾艾", Z: "贼德"
  };

  const zhToEn = Object.fromEntries(
    Object.entries(enToZh).map(([k, v]) => [v, k])
  );

  original.addEventListener("input", () => {
    if (active === "converted") return;
    active = "original";
    converted.value = toChinese(original.value);
    active = null;
  });

  converted.addEventListener("input", () => {
    if (active === "original") return;
    active = "converted";
    original.value = toEnglish(converted.value);
    active = null;
  });

  function toChinese(text) {
    return text.split("").map(c => {
      const up = c.toUpperCase();
      return enToZh[up] ? enToZh[up] : c;
    }).join("");
  }

  function toEnglish(text) {
    let result = text;
    for (const [zh, en] of Object.entries(zhToEn)) {
      result = result.split(zh).join(en);
    }
    return result;
  }
</script>